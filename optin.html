<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Custom Path is Ready | Step 3 of 3</title>
    <meta name="description" content="Based on your answers, we've identified a potential path to homeownership for you. Enter your details to see it.">
    <meta property="og:title" content="Your Custom Path is Ready">
    <meta property="og:description" content="Enter your details to see the legitimate path to homeownership we've found for you.">
    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #003366;
            --secondary-color: #F57C00;
            --text-color: #333;
            --background-color: #f4f4f9;
            --light-gray: #e9e9e9;
            --white: #ffffff;
            --soft-gray: #EBF4FA;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Montserrat', sans-serif; line-height: 1.6; color: var(--text-color); background-color: var(--background-color); display: flex; flex-direction: column; min-height: 100vh; text-align: center; opacity: 0; transition: opacity 1s ease-in-out; }
        body.loaded { opacity: 1; }
        main { flex: 1; display: flex; justify-content: center; align-items: center; padding: 2rem 1rem; }
        .quiz-container { background-color: var(--white); padding: 2.5rem; border-radius: 10px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); max-width: 600px; width: 100%; animation: fadeIn 1s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .status-bar-wrapper { margin-bottom: 2rem; }
        .status-bar-container { display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem; }
        .progress-bar-wrapper { flex-grow: 1; height: 8px; background-color: var(--light-gray); border-radius: 4px; margin: 0 1rem; overflow: hidden; }
        .progress-bar { height: 100%; background-color: var(--primary-color); border-radius: 4px; width: 66.66%; transition: width 1s ease-out; }
        .status-icon { color: var(--primary-color); width: 32px; height: 32px; }
        .step-label { font-size: 1rem; font-weight: 700; color: var(--primary-color); }
        .dynamic-headline h1 { font-size: clamp(1.5rem, 5vw, 2rem); color: var(--primary-color); margin-bottom: 0.5rem; }
        .dynamic-headline p { font-size: clamp(1rem, 2.5vw, 1.1rem); color: var(--text-color); margin-bottom: 2rem; max-width: 500px; margin-left: auto; margin-right: auto; }
        .dynamic-headline p strong { color: var(--secondary-color); font-weight: 700; }
        #optin-form { position: relative; }
        .form-steps-container { position: relative; transition: height 0.4s ease-in-out; }
        .form-group { width: 100%; position: absolute; top: 0; left: 0; text-align: left; opacity: 0; visibility: hidden; transform: translateY(15px); transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out, visibility 0s 0.4s; }
        .form-group.active { opacity: 1; visibility: visible; transform: translateY(0); transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out, visibility 0s 0s; }
        .form-input { width: 100%; padding: 0.9rem 1rem; font-size: 1.2rem; font-family: 'Montserrat', sans-serif; border: 2px solid var(--light-gray); border-radius: 5px; transition: border-color 0.3s ease, box-shadow 0.3s ease; }
        .form-input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(0, 51, 102, 0.1); }
        .form-input.error { border-color: #D32F2F; animation: shake 0.5s ease; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }
        .error-message { text-align: left; color: #D32F2F; font-size: 0.8rem; font-weight: 600; margin-top: 0.5rem; min-height: 1.2rem; display: none; }
        .phone-input-wrapper { display: flex; align-items: center; border: 2px solid var(--light-gray); border-radius: 5px; transition: border-color 0.3s ease, box-shadow 0.3s ease; }
        .phone-input-wrapper:focus-within { border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(0, 51, 102, 0.1); }
        .country-flag { padding-left: 1rem; width: 42px; height: 24px; }
        #phone { border: none; padding-left: 0.75rem; }
        #phone:focus { box-shadow: none; }
        @media (max-width: 400px) { #email::placeholder { font-size: 1rem; } }
        #dynamic-message-container { text-align: center; margin-top: 1rem; min-height: 2.5rem; overflow: hidden; }
        #dynamic-message { font-size: 1rem; color: var(--text-color); font-weight: 500; opacity: 0; transform: translateY(10px); transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out; padding: 0 1rem; }
        #dynamic-message.visible { opacity: 1; transform: translateY(0); }
        #dynamic-message strong { color: var(--primary-color); font-weight: 700; }
        .form-navigation { margin-top: 1.5rem; display: flex; justify-content: space-between; align-items: center; }
        .progress-dots { display: flex; gap: 0.5rem; }
        .dot { width: 10px; height: 10px; border-radius: 50%; background-color: var(--light-gray); transition: background-color 0.4s ease; }
        .dot.active { background-color: var(--primary-color); }
        .next-button { background-color: var(--secondary-color); color: var(--white); font-size: 1rem; font-weight: 700; padding: 0.8rem 1.8rem; border: none; border-radius: 5px; cursor: pointer; text-transform: uppercase; transition: background-color 0.3s ease, transform 0.3s ease, opacity 0.3s ease; flex-shrink: 0; display: flex; align-items: center; justify-content: center; gap: 0.5rem; }
        .next-button:hover { background-color: #E65100; transform: scale(1.05); }
        .spinner { width: 18px; height: 18px; border: 2px solid rgba(255,255,255,0.3); border-top-color: var(--white); border-radius: 50%; animation: spin 1s linear infinite; display: none; }
        .next-button.loading .spinner { display: block; }
        .next-button.loading .button-text { display: none; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .security-note { display: flex; justify-content: center; align-items: center; gap: 0.5rem; margin-top: 1.5rem; font-size: 0.8rem; color: #777; }
        .security-note svg { width: 14px; height: 14px; }
        .social-proof-block { background-color: var(--soft-gray); border-radius: 8px; padding: 1.5rem; text-align: left; margin-top: 2.5rem; } .testimonial-container { display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem; } .testimonial-image { width: 70px; height: 70px; border-radius: 50%; object-fit: cover; border: 3px solid var(--primary-color); flex-shrink: 0; } .testimonial-content { flex-grow: 1; transition: opacity 0.5s ease-in-out; } .testimonial-quote { font-style: italic; font-size: 1rem; color: #555; margin-bottom: 0.5rem; } .testimonial-author { font-weight: 700; font-size: 0.9rem; color: var(--primary-color); } .sleek-timer { font-size: 1rem; font-weight: 700; color: var(--text-color); padding: 0.75rem 1rem; border-radius: 5px; display: flex; align-items: center; justify-content: center; gap: 0.5rem; border: 1px solid var(--light-gray); background-color: var(--white); transition: color 0.5s ease; } .timer-icon { width: 20px; height: 20px; } .site-footer { background-color: var(--primary-color); color: var(--light-gray); padding: 2rem 1rem; font-size: 0.9rem; width: 100%; } .footer-links { list-style: none; padding: 0; margin: 0 auto 1rem auto; display: flex; justify-content: center; flex-wrap: wrap; gap: 1.5rem; max-width: 800px; } .footer-links a { color: var(--light-gray); text-decoration: none; transition: color 0.3s ease; } .footer-links a:hover { color: var(--white); text-decoration: underline; }
       
     @media (max-width: 600px) { .quiz-container { padding: 2rem 1rem; } .social-proof-block { padding: 1rem; } }

     @keyframes pulse-icon {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.icon-pulse {
    animation: pulse-icon 0.6s ease-in-out;
}
.input-wrapper {
    position: relative;
}

.form-label {
    /* Position the label inside the input area */
    position: absolute;
    top: 50%;
    left: 1rem;
    transform: translateY(-50%);
    background: var(--white);
    padding: 0 0.25rem;
    transition: all 0.2s ease-out;
    
    /* This makes the label "unclickable" so you can click the input field underneath */
    pointer-events: none; 
    
    /* Set the default "inactive" color */
    color: #777;
}

/* ADD THIS NEW RULE for the phone label */
.phone-input-wrapper:has(input:focus) + .form-label,
.phone-input-wrapper:has(input:not(:placeholder-shown)) + .form-label {
    top: 0;
    font-size: 0.8rem;
    color: var(--primary-color);
    font-weight: 700;
}

/* For the phone field, adjust the label's left position to account for the flag icon */
.phone-input-wrapper + .form-label {
    left: 3.5rem; 
}

/* This is the magic selector */
/* It says: when the input has text OR is focused, move the label up */
.form-input:not(:placeholder-shown) + .form-label,
.form-input:focus + .form-label {
    top: 0;
    font-size: 0.8rem;
    color: var(--primary-color);
    font-weight: 700;
}
    </style>
</head>
<body>
    <main>
        <div class="quiz-container">
            <div class="status-bar-wrapper">
                <div class="status-bar-container">
                    <svg class="status-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                    <div class="progress-bar-wrapper">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <svg class="status-icon"  id="final-step-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 22H22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M9.49 22V15.54C9.49 14.39 10.39 13.49 11.54 13.49H12.45C13.6 13.49 14.5 14.39 14.5 15.54V22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 11.27L12 2.67L21 11.27V22H3V11.27Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
                <div class="step-label">Step 3 of 3</div>
            </div>
            
            <div class="dynamic-headline">
                <h1 id="dynamic-h1">Your Custom Path is Ready!</h1>
                <p id="dynamic-p">Based on your answers, we've outlined a potential path for you. Enter your details below to see it.</p>
            </div>
            
            <form id="optin-form" novalidate>
                <div class="form-steps-container">
                    <div class="form-group active">
    <div class="input-wrapper">
        <input type="text" id="first-name" class="form-input" placeholder=" " required>
        <label for="first-name" class="form-label">First Name</label>
    </div>
    <div class="error-message">Please enter your first name.</div>
</div>
                   <div class="form-group">
    <div class="input-wrapper">
        <input type="email" id="email" class="form-input" placeholder=" " required>
        <label for="email" class="form-label">Email Address</label>
    </div>
    <div class="error-message">Please use a permanent email address.</div>
</div>
                   
                       <div class="form-group">
    <div class="input-wrapper">
        <div class="phone-input-wrapper">
            <svg class="country-flag" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 48"><path fill="#fff" d="M0 0h72v48H0z"/><path fill="#b22234" d="M0 0h72v4H0zm0 8h72v4H0zm0 16h72v4H0zm0 24h72v4H0zm0 32h72v4H0zm0 40h72v4H0z"/><path fill="#3c3b6e" d="M0 0h36v28H0z"/><path fill="#fff" d="M6 4l1.236.9L8.472 4l.364 1.48L10.272 6l-1.236.9.364 1.48L8 7.4l-1.4.98.364-1.48L5.728 6l1.436-.62L7.528 4zm12 0l1.236.9L20.472 4l.364 1.48L22.272 6l-1.236.9.364 1.48L20 7.4l-1.4.98.364-1.48L17.728 6l1.436-.62L19.528 4zm12 0l1.236.9L32.472 4l.364 1.48L34.272 6l-1.236.9.364 1.48L32 7.4l-1.4.98.364-1.48L29.728 6l1.436-.62L31.528 4zM6 12l1.236.9L8.472 12l.364 1.48L10.272 14l-1.236.9.364 1.48L8 15.4l-1.4.98.364-1.48L5.728 14l1.436-.62L7.528 12zm12 0l1.236.9L20.472 12l.364 1.48L22.272 14l-1.236.9.364 1.48L20 15.4l-1.4.98.364-1.48L17.728 14l1.436-.62L19.528 12zm12 0l1.236.9L32.472 12l.364 1.48L34.272 14l-1.236.9.364 1.48L32 15.4l-1.4.98.364-1.48L29.728 14l1.436-.62L31.528 12zM6 20l1.236.9L8.472 20l.364 1.48L10.272 22l-1.236.9.364 1.48L8 23.4l-1.4.98.364-1.48L5.728 22l1.436-.62L7.528 20zm12 0l1.236.9L20.472 20l.364 1.48L22.272 22l-1.236.9.364 1.48L20 23.4l-1.4.98.364-1.48L17.728 22l1.436-.62L19.528 20zm12 0l1.236.9L32.472 20l.364 1.48L34.272 22l-1.236.9.364 1.48L32 23.4l-1.4.98.364-1.48L29.728 22l1.436-.62L31.528 20z"/></svg>
            <input type="tel" id="phone" class="form-input" placeholder=" " required>
        </div>
        <label for="phone" class="form-label">Phone Number</label>
    </div>
    <div class="error-message">Please enter a valid 10-digit phone number.</div>
</div>
                </div>

                <div id="dynamic-message-container">
                    <p id="dynamic-message"></p>
                </div>

                <div class="form-navigation">
                    <div class="progress-dots">
                        <div class="dot active"></div> <div class="dot"></div> <div class="dot"></div>
                    </div>
                    <button type="button" class="next-button">
                        <span class="button-text">Next</span>
                        <div class="spinner"></div>
                    </button>
                </div>
            </form>

            <div class="social-proof-block">
                <div class="testimonial-container">
                    <img src="placeholder.jpg" id="testimonial-image" loading="lazy" width="70" height="70" alt="Testimonial author photo">
                    <div class="testimonial-content" id="testimonial-content" aria-live="polite">
                        <p class="testimonial-quote" id="testimonial-quote"></p>
                        <p class="testimonial-author" id="testimonial-author"></p>
                    </div>
                </div>
                <div class="sleek-timer" id="sleek-timer">
                    <svg class="timer-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <span id="countdown-timer"></span>
                </div>
            </div>
        </div>
    </main>
    <footer class="site-footer">
        <ul class="footer-links">
            <li><a href="#">About Us</a></li><li><a href="#">Privacy Policy</a></li><li><a href="#">Terms of Service</a></li><li><a href="#">Cookie Policy</a></li><li><a href="#">Affiliate Disclosure</a></li><li><a href="#">GDPR Policy</a></li>
        </ul>
        <p>&copy; 2025 Stop Renting. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // --- INITIAL PAGE SETUP ---
            document.body.classList.add('loaded');
            const progressBar = document.getElementById('progress-bar');
setTimeout(() => { 
    progressBar.style.width = '100%';
    // Move the line to be in here
    document.getElementById('final-step-icon').classList.add('icon-pulse'); 
}, 100);

            // --- DYNAMIC CONTENT LOGIC ---
            const params = new URLSearchParams(window.location.search);
            const fear = params.get('fear');
            const obstacle = params.get('obstacle');
            
            // Headline Logic (Unchanged)
            const dynamicP = document.getElementById('dynamic-p');
            const fearMap = { 'losing-money': 'losing your money', 'complicated-contracts': 'complicated contracts', 'never-own': 'never owning the home' };
            const obstacleMap = { 'credit-score': 'your credit score', 'down-payment': 'a down payment', 'self-doubt': 'self-doubt' };
            if (fear && obstacle && fearMap[fear] && obstacleMap[obstacle]) {
                dynamicP.innerHTML = `Based on your concerns about <strong>${fearMap[fear]}</strong> and overcoming <strong>${obstacleMap[obstacle]}</strong>, we've identified a potential path for you. Enter your details to see it.`;
            }

            // --- ADDED: Maps for hyper-personalized messages ---
            const emailMessageMap = {
                'credit-score': "to show you how to get approved, even with a low credit score",
                'down-payment': "to show you a clear path that doesn't require a large down payment",
                'self-doubt': "to prove that homeownership is closer than you think",
                'default': "so you can see your custom path to homeownership" // Fallback message
            };

            const phoneMessageMap = {
                'losing-money': "We'll text you a secure link to your results, protecting you every step of the way.",
                'complicated-contracts': "We simplify the process. Your secure link will be texted to you, with no complex jargon.",
                'never-own': "This is the final step to owning your own home. We'll text your results to you.",
                'default': "We'll text a secure link to your results so you don't miss them." // Fallback message
            };

            // --- MULTI-STEP FORM LOGIC ---
            const form = document.getElementById('optin-form');
            const formStepsContainer = form.querySelector('.form-steps-container');
            const formGroups = Array.from(form.querySelectorAll('.form-group'));
            const nextButton = form.querySelector('.next-button');
            const buttonText = nextButton.querySelector('.button-text');
            const dots = form.querySelectorAll('.dot');
            const disposableDomains = new Set(['mailinator.com', '10minutemail.com', 'temp-mail.org', 'guerrillamail.com']);
            const dynamicMessage = document.getElementById('dynamic-message');
            let userFirstName = '';
            let currentStep = 0;

            const adjustFormHeight = (stepIndex) => {
                const activeStep = formGroups[stepIndex];
                if (activeStep) { formStepsContainer.style.height = `${activeStep.offsetHeight}px`; }
            };

            const goToStep = (stepIndex) => {
                formGroups.forEach((group, index) => { group.classList.toggle('active', index === stepIndex); });
                dots.forEach((dot, index) => { dot.classList.toggle('active', index === stepIndex); });
                currentStep = stepIndex;
                
                dynamicMessage.classList.remove('visible');
                setTimeout(() => {
                    // --- MODIFIED: Personalized message logic using URL params ---
                    switch(stepIndex) {
                        case 0: // First Name Step
                            if (userFirstName) {
                                dynamicMessage.innerHTML = `Great start, <strong>${userFirstName}</strong>! Let's get this done.`;
                                dynamicMessage.classList.add('visible');
                            }
                            break;
                        case 1: // Email Step
                            const emailReason = emailMessageMap[obstacle] || emailMessageMap.default;
                            dynamicMessage.innerHTML = `Perfect, <strong>${userFirstName}</strong>. We need your best email ${emailReason}.`;
                            dynamicMessage.classList.add('visible');
                            break;
                        case 2: // Phone Step
                            const phoneReason = phoneMessageMap[fear] || phoneMessageMap.default;
                            dynamicMessage.innerHTML = `Almost done, <strong>${userFirstName}</strong>! ${phoneReason}`;
                            dynamicMessage.classList.add('visible');
                            break;
                    }
                    adjustFormHeight(currentStep);
                }, 200);

                setTimeout(() => { 
                    formGroups[currentStep].querySelector('.form-input').focus(); 
                }, 400);

                buttonText.textContent = (currentStep === formGroups.length - 1) ? 'See My Path' : 'Next';
            };
            
            const validateStep = (stepIndex) => {
                const input = formGroups[stepIndex].querySelector('.form-input');
                const errorMessage = formGroups[stepIndex].querySelector('.error-message');
                let isValid = input.checkValidity();
                let customErrorMessage = '';
                if (input.type === 'email') {
                    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(input.value)) { isValid = false; customErrorMessage = 'Please enter a valid email address.'; }
                    else { const domain = input.value.split('@')[1]; if (disposableDomains.has(domain)) { isValid = false; customErrorMessage = 'Please use a permanent email address.'; } }
                }
                if (input.type === 'tel') { const digitCount = input.value.replace(/\D/g, '').length; if (digitCount !== 10) { isValid = false; customErrorMessage = 'Please enter a valid 10-digit phone number.'; } }
                errorMessage.textContent = customErrorMessage || input.validationMessage;
                errorMessage.style.display = isValid ? 'none' : 'block';
                input.classList.toggle('error', !isValid);
                setTimeout(() => adjustFormHeight(stepIndex), 0);
                return isValid;
            };

            nextButton.addEventListener('click', () => {
                if (nextButton.classList.contains('loading')) return;
                if (validateStep(currentStep)) {
                    if (currentStep < formGroups.length - 1) {
                        goToStep(currentStep + 1);
                    } else {
                        nextButton.classList.add('loading');
                        const firstName = encodeURIComponent(document.getElementById('first-name').value);
                        const email = encodeURIComponent(document.getElementById('email').value);
                        const phone = encodeURIComponent(document.getElementById('phone').value);
                        const finalTimer = timeInSeconds;
                        setTimeout(() => {
                            window.location.href = `processing.html?fear=${fear}&obstacle=${obstacle}&firstName=${firstName}&email=${email}&phone=${phone}&timer=${finalTimer}`;
                        }, 1500);
                    }
                }
            });

            formGroups.forEach((group) => {
                const input = group.querySelector('.form-input');
                input.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') { e.preventDefault(); nextButton.click(); }
                });
            });

            const firstNameInput = document.getElementById('first-name');
            firstNameInput.addEventListener('input', () => {
                let value = firstNameInput.value;
                if (value.includes(' ')) { value = value.split(' ')[0]; }
                if (value.length > 0) { value = value.charAt(0).toUpperCase() + value.slice(1).toLowerCase(); }
                firstNameInput.value = value;
                userFirstName = value;
                if (userFirstName) {
                    dynamicMessage.innerHTML = `Great start, <strong>${userFirstName}</strong>! Let's get this done.`;
                    dynamicMessage.classList.add('visible');
                } else {
                    dynamicMessage.classList.remove('visible');
                }
                adjustFormHeight(currentStep);
            });

           const phoneInput = document.getElementById('phone');

phoneInput.addEventListener('input', (e) => {
    // 1. Clean the input and IMMEDIATELY truncate it to 10 digits.
    const cleaned = ('' + e.target.value).replace(/\D/g, '').substring(0, 10);
    
    // 2. Use a regular expression to match the parts of the phone number.
    const match = cleaned.match(/^(\d{0,3})(\d{0,3})(\d{0,4})$/);
    
    if (!match) {
      return; // If no match, exit.
    }
    
    // 3. Build the formatted string based on what was matched.
    let formatted = '';
    // Add the area code part: (XXX
    if (match[1]) {
      formatted += `(${match[1]}`;
    }
    // Add the middle part: ) XXX
    if (match[2]) {
      formatted += `) ${match[2]}`;
    }
    // Add the last part: -XXXX
    if (match[3]) {
      formatted += `-${match[3]}`;
    }
    
    e.target.value = formatted;
});
            
            goToStep(0);
            window.addEventListener('resize', () => adjustFormHeight(currentStep));

            // --- CONTINUOUS TIMER LOGIC (Unchanged) ---
            const timerContainer = document.getElementById('sleek-timer'); const timerElement = document.getElementById('countdown-timer'); let timeInSeconds;
            const savedTime = params.get('timer');
            if (savedTime) { timeInSeconds = parseInt(savedTime, 10); } else { timeInSeconds = 5 * 60; }
            const updateTimer = () => { const minutes = Math.floor(timeInSeconds / 60); let seconds = timeInSeconds % 60; seconds = seconds < 10 ? '0' + seconds : seconds; timerElement.textContent = `Time left: ${minutes}:${seconds}`; if (timeInSeconds < 30) { timerContainer.style.color = 'var(--secondary-color)'; } else { timerContainer.style.color = 'var(--text-color)'; } if (timeInSeconds > 0) { timeInSeconds--; } else { clearInterval(timerInterval); timerElement.textContent = `Time's up!`; } };
            const timerInterval = setInterval(updateTimer, 1000);
            updateTimer();

            // --- TESTIMONIAL LOGIC (Unchanged) ---
            const testimonials = [ { quote: "The Homeownership Compass helped me find my perfect home without the hassle. It’s a legitimate and straightforward process.", author: "— John S.", image: "image1.jpg" }, { quote: "I was skeptical at first, but this program really works. The guidance made all the difference!", author: "— Sarah T.", image: "image2.jpg" }, { quote: "I went from a renter to a homeowner in a few short months. This is a game-changer.", author: "— Michael B.", image: "image3.jpg" } ]; const testimonialContent = document.getElementById('testimonial-content'); const quoteElement = document.getElementById('testimonial-quote'); const authorElement = document.getElementById('testimonial-author'); const imageElement = document.getElementById('testimonial-image'); let currentTestimonialIndex = 0; const updateTestimonial = () => { testimonialContent.style.opacity = 0; setTimeout(() => { const testimonial = testimonials[currentTestimonialIndex]; quoteElement.textContent = testimonial.quote; authorElement.textContent = testimonial.author; imageElement.src = testimonial.image; imageElement.alt = `Photo of ${testimonial.author}`; testimonialContent.style.opacity = 1; currentTestimonialIndex = (currentTestimonialIndex + 1) % testimonials.length; }, 500); }; updateTestimonial(); setInterval(updateTestimonial, 7000);
        });

        
    </script>
</body>
</html>