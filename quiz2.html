<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz: Question 2 of 3</title>

    <meta name="description" content="Worried about rent-to-own scams? Take our 3-step quiz to find your legitimate path to homeownership with The Homeownership Compass.">
    <meta property="og:type" content="website">
    <meta property="og:title" content="The Homeownership Compass | Step 2 Quiz">
    <meta property="og:description" content="Take our 3-step quiz to find your legitimate path to homeownership.">
    <meta property="og:image" content="https://example.com/social-preview-image.jpg">
    
    <link rel="icon" href="/favicon.ico" sizes="any">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #003366;
            --secondary-color: #F57C00;
            --text-color: #333;
            --background-color: #f4f4f9;
            --light-gray: #e9e9e9;
            --white: #ffffff;
            --soft-gray: #EBF4FA;
        }
        /* ... All other CSS from the previous step remains identical ... */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Montserrat', sans-serif; line-height: 1.6; color: var(--text-color); background-color: var(--background-color); display: flex; flex-direction: column; min-height: 100vh; text-align: center; opacity: 0; transition: opacity 1s ease-in-out; }
        body.loaded { opacity: 1; }
        main { flex: 1; display: flex; justify-content: center; align-items: center; padding: 2rem 1rem; }
        .quiz-container { background-color: var(--white); padding: 2.5rem; border-radius: 10px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); max-width: 600px; width: 100%; animation: fadeIn 1s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .dynamic-intro { font-style: italic; color: var(--primary-color); margin-bottom: 1.5rem; padding-bottom: 1.5rem; border-bottom: 1px solid var(--light-gray); font-weight: 600; opacity: 0; transition: opacity 0.5s ease-in-out; }
        .dynamic-intro.visible { opacity: 1; }
        .status-bar-wrapper { margin-bottom: 2rem; } .status-bar-container { display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.5rem; }
        .progress-bar-wrapper { flex-grow: 1; height: 8px; background-color: var(--light-gray); border-radius: 4px; margin: 0 1rem; overflow: hidden; }
        .progress-bar { height: 100%; background-color: var(--primary-color); border-radius: 4px; width: 33.33%; transition: width 1s ease-out; }
        .status-icon { color: var(--primary-color); width: 32px; height: 32px; } .step-label { font-size: 1rem; font-weight: 700; color: var(--primary-color); }
        .quiz-subheading { font-weight: 700; color: var(--primary-color); margin-bottom: 0.5rem; font-size: clamp(1.2rem, 5vw, 1.5rem); }
        .quiz-body-copy { color: #555; margin-bottom: 2rem; font-size: clamp(0.9rem, 2.5vw, 1rem); }
        .quiz-question-fieldset { border: none; padding: 0; margin: 0; } .quiz-question-legend { font-weight: 700; margin-bottom: 1.5rem; padding: 0; width: 100%; font-size: clamp(1.1rem, 4vw, 1.25rem); }
        .option-group { display: flex; flex-direction: column; gap: 1rem; }
        .option-label { display: flex; align-items: center; justify-content: space-between; background-color: var(--light-gray); color: var(--text-color); padding: 1rem 1.5rem; border-radius: 8px; cursor: pointer; border: 2px solid transparent; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05); text-align: left; font-weight: 400; font-size: clamp(0.9rem, 2.5vw, 1rem); transition: all 0.3s ease; }
        .option-label.faded { opacity: 0.5; pointer-events: none; } .option-label:hover { background-color: #ddd; transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); }
        .option-input { display: none; } .option-label::after { content: '✔'; font-size: 1.2rem; color: var(--white); opacity: 0; transform: scale(0.5); transition: opacity 0.3s ease, transform 0.3s ease; }
        .option-input:checked + .option-label { background-color: var(--primary-color); color: var(--white); border-color: var(--secondary-color); box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); transform: translateY(-3px) scale(1.02); }
        .option-input:checked + .option-label::after { opacity: 1; transform: scale(1); } .option-input:focus-visible + .option-label { outline: 2px solid var(--secondary-color); outline-offset: 2px; }
        .social-proof-block { background-color: var(--soft-gray); border-radius: 8px; padding: 1.5rem; margin-top: 2.5rem; text-align: left; } .testimonial-container { display: flex; align-items: center; gap: 1.5rem; margin-bottom: 1.5rem; }
        .testimonial-image { width: 70px; height: 70px; border-radius: 50%; object-fit: cover; border: 3px solid var(--primary-color); flex-shrink: 0; }
        .testimonial-content { flex-grow: 1; transition: opacity 0.5s ease-in-out; } .testimonial-quote { font-style: italic; font-size: 1rem; color: #555; margin-bottom: 0.5rem; } .testimonial-author { font-weight: 700; font-size: 0.9rem; color: var(--primary-color); }
        .sleek-timer { font-size: 1rem; font-weight: 700; color: var(--text-color); padding: 0.75rem 1rem; border-radius: 5px; display: flex; align-items: center; justify-content: center; gap: 0.5rem; border: 1px solid var(--light-gray); background-color: var(--white); transition: color 0.5s ease; }
        .timer-icon { width: 20px; height: 20px; }
        .promise-container { margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid var(--light-gray); position: relative; height: 24px; }
        .promise-item { position: absolute; width: 100%; left: 0; display: flex; justify-content: center; align-items: center; gap: 0.5rem; font-size: 0.9rem; font-weight: 600; color: #555; opacity: 0; transition: opacity 0.5s ease-in-out; }
        .promise-item.active { opacity: 1; } .promise-item svg { width: 18px; height: 18px; color: var(--primary-color); flex-shrink: 0; }
        .site-footer { background-color: var(--primary-color); color: var(--light-gray); padding: 2rem 1rem; font-size: 0.9rem; width: 100%; } .footer-links { list-style: none; padding: 0; margin: 0 auto 1rem auto; display: flex; justify-content: center; flex-wrap: wrap; gap: 1.5rem; max-width: 800px; }
        .footer-links a { color: var(--light-gray); text-decoration: none; transition: color 0.3s ease; } .footer-links a:hover { color: var(--white); text-decoration: underline; }
        @media (max-width: 600px) { .quiz-container { padding: 2rem 1rem; } .social-proof-block { padding: 1rem; } }
    body.fade-out {
    opacity: 0;
    transition: opacity 0.4s ease-out;
}
    </style>
</head>
<body>
    <main>
        <div class="quiz-container">
            <div class="status-bar-wrapper">
                <div class="status-bar-container">
                    <svg class="status-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                    <div class="progress-bar-wrapper">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <svg class="status-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 22H22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M9.49 22V15.54C9.49 14.39 10.39 13.49 11.54 13.49H12.45C13.6 13.49 14.5 14.39 14.5 15.54V22" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M3 11.27L12 2.67L21 11.27V22H3V11.27Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </div>
                <div class="step-label">Step 2 of 3</div>
            </div>
            
            <p class="dynamic-intro" id="dynamic-intro"></p>

            <h2 class="quiz-subheading">What's Your Biggest Obstacle?</h2>
            <p class="quiz-body-copy">"We understand your frustrations. This new path is designed to work with the resources you have now."</p>

            <form id="quiz-form">
                <fieldset class="quiz-question-fieldset">
                    <legend class="quiz-question-legend">"What is the biggest thing holding you back?"</legend>
                    <div class="option-group">
                        <input type="radio" id="credit-score" name="obstacle" value="credit-score" class="option-input">
                        <label for="credit-score" class="option-label">My credit score.</label>
                        <input type="radio" id="down-payment" name="obstacle" value="down-payment" class="option-input">
                        <label for="down-payment" class="option-label">A down payment.</label>
                        <input type="radio" id="self-doubt" name="obstacle" value="self-doubt" class="option-input">
                        <label for="self-doubt" class="option-label">Self-doubt.</label>
                    </div>
                </fieldset>
            </form>

            <div class="promise-container" id="promise-container" aria-live="polite">
                <div class="promise-item active">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <span>Secure Process</span>
                </div>
                <div class="promise-item">
                     <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <span>Clear Contracts</span>
                </div>
                 <div class="promise-item">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <span>Path to Ownership</span>
                </div>
            </div>

            <div class="social-proof-block">
                <div class="testimonial-container">
                    <img src="placeholder.jpg" id="testimonial-image" loading="lazy" width="70" height="70">
                    <div class="testimonial-content" id="testimonial-content" aria-live="polite">
                        <p class="testimonial-quote" id="testimonial-quote"></p>
                        <p class="testimonial-author" id="testimonial-author"></p>
                    </div>
                </div>
                <div class="sleek-timer" id="sleek-timer">
                    <svg class="timer-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    <span id="countdown-timer"></span>
                </div>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <ul class="footer-links">
            <li><a href="#">About Us</a></li><li><a href="#">Privacy Policy</a></li><li><a href="#">Terms of Service</a></li><li><a href="#">Cookie Policy</a></li><li><a href="#">Affiliate Disclosure</a></li><li><a href="#">GDPR Policy</a></li>
        </ul>
        <p>&copy; 2025 Stop Renting. All rights reserved.</p>
    </footer>

    <script>
    document.addEventListener("DOMContentLoaded", function() {
        document.body.classList.add('loaded');
        
        const progressBar = document.getElementById('progress-bar');
        setTimeout(() => { progressBar.style.width = '66.66%'; }, 100);

        const params = new URLSearchParams(window.location.search);
        const fear = params.get('fear');
        const dynamicIntro = document.getElementById('dynamic-intro');
        const fearMap = {
            'losing-money': "Since you're concerned about losing money, let's look at the next step...",
            'complicated-contracts': "Because complex contracts are a worry, let's clarify the next step...",
            'never-own': "If you're worried you'll never own, let's focus on the next step to get you there..."
        };
        if (fear && fearMap[fear]) {
            dynamicIntro.textContent = fearMap[fear];
            dynamicIntro.classList.add('visible');
        }

        // UPDATED: Timer now reads from the URL parameter
        const timerContainer = document.getElementById('sleek-timer');
        const timerElement = document.getElementById('countdown-timer');
        let timeInSeconds;
        const savedTime = params.get('timer'); // Read from URL instead of session storage

        if (savedTime) {
            timeInSeconds = parseInt(savedTime, 10);
        } else {
            timeInSeconds = 5 * 60; // Fallback if no timer is found
        }

        const updateTimer = () => { const minutes = Math.floor(timeInSeconds / 60); let seconds = timeInSeconds % 60; seconds = seconds < 10 ? '0' + seconds : seconds; timerElement.textContent = `Time left: ${minutes}:${seconds}`; if (timeInSeconds < 30) { timerContainer.style.color = 'var(--secondary-color)'; } else { timerContainer.style.color = 'var(--text-color)'; } if (timeInSeconds > 0) { timeInSeconds--; } else { clearInterval(timerInterval); timerElement.textContent = `Time's up!`; } };
        const timerInterval = setInterval(updateTimer, 1000);
        updateTimer();

        // UPDATED: Form now sends the timer value in the URL
        const quizForm = document.getElementById('quiz-form');
        const optionLabels = document.querySelectorAll('.option-label');
        quizForm.addEventListener('change', function(event) {
            const selectedInput = event.target;
            const selectedObstacle = selectedInput.value;

            // REMOVED: sessionStorage.setItem('quizTimer', timeInSeconds);

            optionLabels.forEach(label => { if (label.getAttribute('for') !== selectedInput.id) { label.classList.add('faded'); } });
            
           document.body.classList.add('fade-out');
            setTimeout(() => {
                
                // UPDATED: Pass the timer value in the URL
                window.location.href = `optin.html?fear=${fear}&obstacle=${selectedObstacle}&timer=${timeInSeconds}`;
            }, 400);
        }, 400);

        // Testimonial logic (unchanged)
        const testimonials = [ { quote: "The Homeownership Compass helped me find my perfect home without the hassle. It’s a legitimate and straightforward process.", author: "— John S.", image: "image1.jpg" }, { quote: "I was skeptical at first, but this program really works. The guidance made all the difference!", author: "— Sarah T.", image: "image2.jpg" }, { quote: "I went from a renter to a homeowner in a few short months. This is a game-changer.", author: "— Michael B.", image: "image3.jpg" } ];
        const testimonialContent = document.getElementById('testimonial-content'); const quoteElement = document.getElementById('testimonial-quote'); const authorElement = document.getElementById('testimonial-author'); const imageElement = document.getElementById('testimonial-image'); let currentTestimonialIndex = 0;
        const updateTestimonial = () => { testimonialContent.style.opacity = 0; setTimeout(() => { const testimonial = testimonials[currentTestimonialIndex]; quoteElement.textContent = testimonial.quote; authorElement.textContent = testimonial.author; imageElement.src = testimonial.image; imageElement.alt = `Photo of ${testimonial.author}`; testimonialContent.style.opacity = 1; currentTestimonialIndex = (currentTestimonialIndex + 1) % testimonials.length; }, 500); };
        updateTestimonial(); setInterval(updateTestimonial, 7000);
        
        // Promise bar logic (unchanged)
        const promiseContainer = document.getElementById('promise-container');
        if (promiseContainer) {
            const promiseItems = promiseContainer.querySelectorAll('.promise-item');
            let currentPromiseIndex = 0;
            setInterval(() => {
                promiseItems[currentPromiseIndex].classList.remove('active');
                currentPromiseIndex = (currentPromiseIndex + 1) % promiseItems.length;
                promiseItems[currentPromiseIndex].classList.add('active');
            }, 2000);
        }
    });
</script>
</body>
</html>